/******/
!function(e){function t(i){if(n[i])return n[i].exports
var s=n[i]={exports:{},id:i,loaded:!1}
return e[i].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={}
t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict"
!function(){var e=n(1),t={dials:[{id:"local-time",hands:{hour:"primary-hours-hand",minute:"primary-minutes-hand"},offset:"+3"},{id:"home-time",hands:{hour:"secondary-hours-hand",second:"secondary-minutes-hand"},offset:"-4",format:24}],reserve:{id:"power-reserve-hand",range:[-90,90]},crown:{id:"crown",blackout:[{selector:".blackout",className:"active"},{selector:".main_dial",className:"faded"}]},repeater:{id:"repeater-btn",chimes:{hour:"./dist/sounds/chime-01.mp4",fiveMinute:"./dist/sounds/chime-02.mp4",minute:"./dist/sounds/chime-03.mp4"}}},i=new e(t),s=document.getElementById("home-field"),r=document.getElementById("local-field")
s.addEventListener("change",function(){i.stopInterval(),t.dials[1].offset=s.value.toString(),i=new e(t)}),r.addEventListener("change",function(){i.stopInterval(),t.dials[0].offset=r.value.toString(),i=new e(t)})}()},function(e,t,n){"use strict"
function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n]
i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),a=n(4),o=n(5),u=n(6),h=n(7),l=function(){function e(t){var n=this
i(this,e),this.dialInstances=[],this.globalInterval=null,this.rightNow=new Date,t.dials.forEach(function(e){var t=new r(e,n)
n.dialInstances.push(t)}),t.crown&&(this.crown=new a(t.crown,this)),t.reserve&&(this.powerReserve=new o(t.reserve,this)),t.moonphase&&(this.moonphase=new u(t.moonphase,this)),t.repeater&&(this.repeaterDial=t.repeater.dial||0,this.repeater=new h(this.dialInstances[this.repeaterDial],t.repeater)),this.init()}return s(e,[{key:"keyBindings",value:function(){var e=this
window.addEventListener("keydown",function(){switch(event.keyCode){case 37:e.powerReserve&&e.powerReserve.incrementReserve()
break
case 13:e.crown&&e.crown.toggleCrown()}if(e.crown&&e.crown.crownActive)switch(event.keyCode){case 37:e.powerReserve&&e.powerReserve.incrementReserve()
break
case 38:e.dialInstances.forEach(function(t){t.setSecondary&&t.id===e.dialInstances[e.dialInstances.length-1].id?t.rotateHands():t.setSecondary||t.rotateHands()})
break
case 39:e.crown&&e.crown.toggleBlackout(),e.dialInstances.forEach(function(e){e.toggleSecondaryTime()})
break
case 40:e.dialInstances.forEach(function(t){t.setSecondary&&t.id===e.dialInstances[e.dialInstances.length-1].id?t.rotateHands("back"):t.setSecondary||t.rotateHands("back")})}})}},{key:"startInterval",value:function(){var e=this
this.globalInterval=setInterval(function(){e.dialInstances.forEach(function(e){e.getCurrentTime(),e.rotateHands()}),e.powerReserve&&e.powerReserve.decrementReserve(),e.moonphase&&e.moonphase.getCurrentPhase()},1e3)}},{key:"stopInterval",value:function(){clearInterval(this.globalInterval),this.globalInterval=null,this.repeater&&this.repeater.stopAll()}},{key:"init",value:function(){this.startInterval(),this.keyBindings()}}]),e}()
e.exports=l},function(e,t,n){"use strict"
function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n]
i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(3),a=function(){function e(t,n){i(this,e)
try{if(!t.hands)throw"The Dial class needs an object containing the HTML elements for the hands."}catch(e){return void console.error(e)}this.id=t.id,this.hands={},t.hands.hour&&(this.hands.hour=document.getElementById(t.hands.hour)),t.hands.minute&&(this.hands.minute=document.getElementById(t.hands.minute)),t.hands.second&&(this.hands.second=document.getElementById(t.hands.second)),this.parent=n,this.format=t.format?t.format:12,this.gmtOffset=t.offset?t.offset.toString():null,this.rightNow=this.parent.rightNow,this.currentTime={},this.rotateValues={hoursRotateVal:12===this.format?30:15,hoursRotateValOffset:12===this.format?.5:.25,hourJump:30,minutesRotateVal:6},this.interval=null,this.crownActive=!1,this.manualTime=!1,this.settingTime=!1,this.setSecondary=!1,this.transition=null,this.init()}return s(e,[{key:"toggleActiveCrown",value:function(){this.crownActive=!this.crownActive}},{key:"toggleSecondaryTime",value:function(){this.setSecondary=!this.setSecondary}},{key:"toggleSettingTime",value:function(){this.settingTime=!this.settingTime}},{key:"updateToManualTime",value:function(){this.manualTime=!0}},{key:"startInterval",value:function(){var e=this
this.interval=setInterval(function(){e.getCurrentTime(),e.rotateHands()},1e3)}},{key:"stopInterval",value:function(){clearInterval(this.interval),this.interval=null}},{key:"getCurrentTime",value:function(){if(this.rightNow=new Date,this.gmtOffset){var e=this.rightNow.getTime()+6e4*this.rightNow.getTimezoneOffset()
this.rightNow=new Date(e+36e5*this.gmtOffset)}var t={hours:this.rightNow.getHours(),minutes:this.rightNow.getMinutes(),seconds:this.rightNow.getSeconds()}
this.currentTime=t}},{key:"rotateHands",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=void 0
if(this.hands.hour){var n=this.setSecondary?this.rotateValues.hourJump:this.rotateValues.hoursRotateValOffset
t=r.getCurrentRotateValue(this.hands.hour),this.settingTime?e?t-=n:t+=n:this.manualTime?0===this.currentTime.seconds&&(t=r.getCurrentRotateValue(this.hands.hour)+this.rotateValues.hoursRotateValOffset):t=this.currentTime.hours*this.rotateValues.hoursRotateVal+this.currentTime.minutes*this.rotateValues.hoursRotateValOffset,this.hands.hour.style.transform="rotate("+t+"deg)"}this.hands.minute&&(t=r.getCurrentRotateValue(this.hands.minute),this.settingTime?e?t-=this.rotateValues.minutesRotateVal:t+=this.rotateValues.minutesRotateVal:this.manualTime?0===this.currentTime.seconds&&(t+=this.rotateValues.minutesRotateVal):t=this.currentTime.minutes*this.rotateValues.minutesRotateVal,this.hands.minute.style.transform="rotate("+t+"deg)"),this.hands.second&&(t=this.currentTime.seconds*this.rotateValues.minutesRotateVal,0===t?(this.transition=this.hands.second.style.transition,this.hands.second.style.transition="none"):t>0&&"none"===this.hands.second.style.transition&&(this.hands.second.style.transition=this.transition),this.hands.second.style.transform="rotate("+t+"deg)")}},{key:"init",value:function(){var e=this
setTimeout(function(){e.getCurrentTime(),e.rotateHands()},350)}}]),e}()
e.exports=a},function(e,t){"use strict"
e.exports={getCurrentRotateValue:function(e){var t=e.style.transform,n=t.replace("rotate(","").replace("deg)","")
return Number(n)}}},function(e,t){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n]
i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,i){n(this,e),this.crown=document.getElementById(t.id),this.blackoutElements=t.blackout,this.parent=i,this.crownActive=!1,this.setSecondary=!1,this.init()}return i(e,[{key:"toggleBlackout",value:function(){this.setSecondary=!this.setSecondary,this.blackoutElements.forEach(function(e){document.querySelector(e.selector).classList.toggle(e.className)})}},{key:"toggleCrown",value:function(){this.crownActive=!this.crownActive,this.parent.dialInstances.forEach(function(e){e.toggleActiveCrown&&e.toggleActiveCrown(),e.setSecondary&&e.toggleSecondaryTime()}),this.crownActive?(this.parent.stopInterval(),this.crown.classList.add("active"),this.parent.dialInstances.forEach(function(e){e.toggleSettingTime&&e.toggleSettingTime()})):(this.parent.startInterval(),this.crown.classList.remove("active"),this.setSecondary&&this.toggleBlackout(),this.parent.dialInstances.forEach(function(e){e.toggleSettingTime&&e.toggleSettingTime(),e.updateToManualTime&&e.updateToManualTime()}))}},{key:"init",value:function(){var e=this
this.crown.addEventListener("click",function(){e.toggleCrown()})}}]),e}()
e.exports=s},function(e,t,n){"use strict"
function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n]
i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(3),a=function(){function e(t,n){i(this,e),this.element=document.getElementById(t.id),this.interval=null,this.parent=n,this.minAngle=t.range[0],this.maxAngle=t.range[1],this.increment=.5,this.init()}return s(e,[{key:"decrementReserve",value:function(){var e=r.getCurrentRotateValue(this.element)
if(e<=this.minAngle)this.parent.stopInterval()
else{var t=Number(e)-this.increment/2
this.element.style.transform="rotate("+t+"deg)"}}},{key:"incrementReserve",value:function(){var e=r.getCurrentRotateValue(this.element)
if(e<=this.maxAngle-this.increment&&e>=this.minAngle){var t=Number(e)+this.increment
this.element.style.transform="rotate("+t+"deg)"}}},{key:"startInterval",value:function(){var e=this
this.interval=setInterval(function(){e.decrementReserve()},1e3)}},{key:"stopInterval",value:function(){clearInterval(this.interval),this.interval=null}},{key:"init",value:function(){this.element.style.transform="rotate("+this.maxAngle+"deg)"}}]),e}()
e.exports=a},function(e,t){"use strict"
function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n]
i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,i){n(this,e),this.parent=i,this.element=document.getElementById(t.id),this.invert=t.invert||!1,this.init()}return i(e,[{key:"rotateDisc",value:function(e){e=this.invert?-1*e:e,this.element.style.transform="rotate("+e+"deg)"}},{key:"getCurrentPhase",value:function(){var e=this.parent.rightNow,t=e.getFullYear(),n=e.getMonth(),i=e.getDate(),s=void 0,r=void 0,a=void 0,o=void 0,u=void 0
switch(n<3&&(t--,n+=12),n++,s=365.25*t,r=30.6*n,a=s+r+i-694039.09,a/=29.5305882,o=parseInt(a),a-=o,o=Math.round(8*a),u=10*a,u=+u.toFixed(2),o>=8&&(o=0),o){case 0:this.rotateDisc(180)
break
case 1:this.rotateDisc(22.5)
break
case 2:this.rotateDisc(45)
break
case 3:this.rotateDisc(67.5)
break
case 4:this.rotateDisc(0)
break
case 5:this.rotateDisc(-22.5)
break
case 6:this.rotateDisc(-45)
break
case 7:this.rotateDisc(-67.5)
break
default:console.log("Error")}}},{key:"init",value:function(){this.getCurrentPhase()}}]),e}()
e.exports=s},function(e,t,n){"use strict"
function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n]
i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(3),a=function(){function e(t,n){i(this,e),this.hands=t.hands,this.hourAngle=0,this.hourChimes=0,this.hourElement=null,this.hourDivisor=12===t.format?30:15,this.allMinutes=0,this.minuteAngle=0,this.fiveMinuteChimes=0,this.fiveMinuteElement=null,this.minuteChimes=0,this.minuteElement=null,this.trigger=document.getElementById(n.id),this.chimes=n.chimes,this.counter=1,this.isPlaying=!1,this.init()}return s(e,[{key:"convertAngleToIncrements",value:function(){this.hourAngle=r.getCurrentRotateValue(this.hands.hour),this.hourChimes=Math.floor(this.hourAngle/this.hourDivisor)
try{if(!this.hands.minute)throw"The minute repeater, like, by definition, requires a dial which supports a minute hand."}catch(e){return void console.error(e)}this.minuteAngle=r.getCurrentRotateValue(this.hands.minute),this.allMinutes=Math.floor(this.minuteAngle/6),this.fiveMinuteChimes=Math.floor(this.allMinutes/5),this.minuteChimes=Math.floor(this.allMinutes-5*this.fiveMinuteChimes)}},{key:"bindEvents",value:function(){var e=this
this.trigger.addEventListener("click",function(){e.togglePlaying()}),this.hourElement.addEventListener("ended",function(){e.playHours()}),this.fiveMinuteElement.addEventListener("ended",function(){e.playFiveMinutes()}),this.minuteElement.addEventListener("ended",function(){e.playMinutes()})}},{key:"stopAll",value:function(){this.hourElement.pause(),this.hourElement.currentTime=0,this.fiveMinuteElement.pause(),this.fiveMinuteElementcurrentTime=0,this.minuteElement.pause(),this.minuteElementcurrentTime=0,this.counter=1,this.isPlaying=!1}},{key:"togglePlaying",value:function(){this.isPlaying=!this.isPlaying,this.isPlaying?(this.convertAngleToIncrements(),this.playHours()):this.stopAll()}},{key:"playHours",value:function(){this.counter<=this.hourChimes?(this.hourElement.play(),this.counter++):this.counter===this.hourChimes+1&&(this.counter=1,this.playFiveMinutes())}},{key:"playFiveMinutes",value:function(){this.counter<=this.fiveMinuteChimes?(this.fiveMinuteElement.play(),this.counter++):this.counter===this.fiveMinuteChimes+1&&(this.counter=1,this.playMinutes())}},{key:"playMinutes",value:function(){this.counter<=this.minuteChimes?(this.minuteElement.play(),this.counter++):this.counter===this.minuteChimes+1&&(this.counter=1)}},{key:"buildAudioElements",value:function(){this.hourElement=document.createElement("audio"),this.hourElement.src=this.chimes.hour,document.body.appendChild(this.hourElement),this.fiveMinuteElement=document.createElement("audio"),this.fiveMinuteElement.src=this.chimes.fiveMinute,document.body.appendChild(this.fiveMinuteElement),this.minuteElement=document.createElement("audio"),this.minuteElement.src=this.chimes.minute,document.body.appendChild(this.minuteElement)}},{key:"init",value:function(){this.buildAudioElements(),this.bindEvents()}}]),e}()
e.exports=a}])
