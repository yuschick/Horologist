/******/
!function(t){function e(i){if(n[i])return n[i].exports
var s=n[i]={exports:{},id:i,loaded:!1}
return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={}
e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict"
!function(){var t=n(1),e={dials:[{name:"local-time",hands:{hour:"primary-hours-hand",minute:"primary-minutes-hand"},offset:"+3"},{name:"home-time",hands:{hour:"secondary-hours-hand",second:"secondary-minutes-hand"},offset:"-4",format:24,sweep:!0}],reserve:{id:"power-reserve-hand",range:[-90,90]},crown:{id:"crown",blackout:[{selector:".blackout",className:"active"},{selector:".main_dial",className:"faded"}]},repeater:{id:"repeater-btn",chimes:{hour:"./dist/sounds/chime-01.mp4",fiveMinute:"./dist/sounds/chime-02.mp4",minute:"./dist/sounds/chime-03.mp4"}}},i=new t(e),s=document.getElementById("home-field"),r=document.getElementById("local-field")
s.addEventListener("change",function(){i.stopInterval(),e.dials[1].offset=s.value.toString(),i=new t(e)}),r.addEventListener("change",function(){i.stopInterval(),e.dials[0].offset=r.value.toString(),i=new t(e)})}()},function(t,e,n){"use strict"
function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n]
i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(2),a=n(3),o=n(4),h=n(5),u=n(6),l=n(7),c=function(){function t(e){var n=this
i(this,t)
try{if(!e.dials)throw"At least one dial is required for the Watch class."}catch(t){return void console.error(t)}this.dialInstances=[],this.activeDial=0,this.globalInterval=null,this.rightNow=new Date,e.dials.forEach(function(t){var e=new r(t,n)
n.dialInstances.push(e)}),e.crown&&(this.crown=new a(e.crown,this)),e.reserve&&(this.powerReserve=new o(e.reserve,this)),e.moonphase&&(this.moonphase=new h(e.moonphase,this)),e.repeater&&(this.repeaterDial=e.repeater.dial||0,this.repeater=new u(this.dialInstances[this.repeaterDial],e.repeater,this)),e.dayNightIndicator&&(this.dayNightIndicatorDial=e.dayNightIndicator.dial||0,this.dayNightIndicator=new l(this.dialInstances[this.dayNightIndicatorDial],e.dayNightIndicator,this)),this.init()}return s(t,[{key:"getCurrentRotateValue",value:function(t){var e=t.style.transform,n=e.replace("rotate(","").replace("deg)","")
return Number(n)}},{key:"resetActiveDial",value:function(){this.activeDial=0}},{key:"keyBindings",value:function(){var t=this
window.addEventListener("keydown",function(){switch(event.keyCode){case 37:t.powerReserve&&t.powerReserve.incrementReserve()
break
case 13:t.crown&&t.crown.toggleCrown()}if(t.crown&&t.crown.crownActive)switch(event.preventDefault(),event.keyCode){case 37:t.powerReserve&&t.powerReserve.incrementReserve()
break
case 38:t.dialInstances[t.activeDial].rotateHands()
break
case 39:t.activeDial++,t.activeDial>=t.dialInstances.length&&(t.activeDial=0)
break
case 40:t.dialInstances[t.activeDial].rotateHands("back")}})}},{key:"startInterval",value:function(){var t=this
this.globalInterval=setInterval(function(){t.dialInstances.forEach(function(t){t.getCurrentTime(),t.rotateHands()}),t.powerReserve&&t.powerReserve.decrementReserve(),t.moonphase&&t.moonphase.getCurrentPhase()},1e3)}},{key:"stopInterval",value:function(){clearInterval(this.globalInterval),this.globalInterval=null,this.repeater&&this.repeater.stopAll()}},{key:"init",value:function(){this.startInterval(),this.keyBindings()}}]),t}()
t.exports=c},function(t,e){"use strict"
function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n]
i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e,i){n(this,t)
try{if(!e.hands)throw"The Dial class needs an object containing the HTML elements for the hands."}catch(t){return void console.error(t)}this.name=e.name,this.hands={},e.hands.hour&&(this.hands.hour=document.getElementById(e.hands.hour)),e.hands.minute&&(this.hands.minute=document.getElementById(e.hands.minute)),e.hands.second&&(this.hands.second=document.getElementById(e.hands.second)),this.parent=i,this.format=e.format?e.format:12,this.gmtOffset=e.offset?e.offset.toString():null,this.sweepingSeconds=e.sweep||!1,this.rightNow=this.parent.rightNow,this.currentTime={},this.rotateValues={hoursRotateVal:12===this.format?30:15,hoursRotateValOffset:12===this.format?.5:.25,hourJump:30,minutesRotateVal:6},this.interval=null,this.crownActive=!1,this.manualTime=!1,this.settingTime=!1,this.transition={},this.init()}return i(t,[{key:"toggleActiveCrown",value:function(){this.crownActive=!this.crownActive}},{key:"toggleSettingTime",value:function(){this.settingTime=!this.settingTime}},{key:"updateToManualTime",value:function(){this.manualTime=!0}},{key:"startInterval",value:function(){var t=this
this.interval=setInterval(function(){t.getCurrentTime(),t.rotateHands()},1e3)}},{key:"stopInterval",value:function(){clearInterval(this.interval),this.interval=null}},{key:"applySweepingTransition",value:function(){this.hands.second.style.transition="transform 1s linear"}},{key:"getCurrentTime",value:function(){if(this.rightNow=new Date,this.gmtOffset){var t=this.rightNow.getTime()+6e4*this.rightNow.getTimezoneOffset()
this.rightNow=new Date(t+36e5*this.gmtOffset)}var e={hours:this.rightNow.getHours(),minutes:this.rightNow.getMinutes(),seconds:this.rightNow.getSeconds()}
this.currentTime=e}},{key:"checkForDayNightUpdates",value:function(){this.parent.dayNightIndicator.convertAngleToHours(this.name)}},{key:"rotateHands",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=void 0
if(this.hands.hour){var n=this.rotateValues.hoursRotateValOffset
e=this.parent.getCurrentRotateValue(this.hands.hour),this.settingTime?t?e-=n:e+=n:this.manualTime?0===this.currentTime.seconds&&(e=this.parent.getCurrentRotateValue(this.hands.hour)+this.rotateValues.hoursRotateValOffset):e=this.currentTime.hours*this.rotateValues.hoursRotateVal+this.currentTime.minutes*this.rotateValues.hoursRotateValOffset,0===e||e>=360?(this.transition.hour=this.hands.hour.style.transition,this.hands.hour.style.transition="none"):e>0&&"none"===this.hands.hour.style.transition&&(this.hands.hour.style.transition=this.transition.hour),e>360&&(e-=360),this.hands.hour.style.transform="rotate("+e+"deg)"}this.hands.minute&&(e=this.parent.getCurrentRotateValue(this.hands.minute),this.settingTime?t?e-=this.rotateValues.minutesRotateVal:e+=this.rotateValues.minutesRotateVal:this.manualTime?0===this.currentTime.seconds&&(e+=this.rotateValues.minutesRotateVal):e=this.currentTime.minutes*this.rotateValues.minutesRotateVal,0===e?(this.transition.minute=this.hands.minute.style.transition,this.hands.minute.style.transition="none"):e>0&&"none"===this.hands.minute.style.transition&&(this.hands.minute.style.transition=this.transition.minute),this.hands.minute.style.transform="rotate("+e+"deg)"),this.hands.second&&(e=this.currentTime.seconds*this.rotateValues.minutesRotateVal,0===e?(this.transition.second=this.hands.second.style.transition,this.hands.second.style.transition="none"):e>0&&"none"===this.hands.second.style.transition&&(this.hands.second.style.transition=this.transition.second),this.hands.second.style.transform="rotate("+e+"deg)"),this.parent.dayNightIndicator&&this.checkForDayNightUpdates()}},{key:"init",value:function(){var t=this
setTimeout(function(){t.getCurrentTime(),t.rotateHands(),setTimeout(function(){t.hands.second&&t.sweepingSeconds&&t.applySweepingTransition()},100)},350)}}]),t}()
t.exports=s},function(t,e){"use strict"
function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n]
i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e,i){n(this,t)
try{if(!e.id)throw"The Crown class requires that an ID of the crown element be provided."}catch(t){return void console.error(t)}this.crown=document.getElementById(e.id),this.parent=i,this.crownActive=!1,this.init()}return i(t,[{key:"toggleCrown",value:function(){this.crownActive=!this.crownActive,this.parent.dialInstances.forEach(function(t){t.toggleActiveCrown&&t.toggleActiveCrown()}),this.crownActive?(this.parent.stopInterval(),this.crown.classList.add("active"),this.parent.dialInstances.forEach(function(t){t.toggleSettingTime&&t.toggleSettingTime()})):(this.parent.startInterval(),this.parent.resetActiveDial(),this.crown.classList.remove("active"),this.parent.dialInstances.forEach(function(t){t.toggleSettingTime&&t.toggleSettingTime(),t.updateToManualTime&&t.updateToManualTime()}))}},{key:"updateCursorForTrigger",value:function(){this.crown.style.cursor="pointer"}},{key:"init",value:function(){var t=this
this.updateCursorForTrigger(),this.crown.addEventListener("click",function(){t.toggleCrown()})}}]),t}()
t.exports=s},function(t,e){"use strict"
function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n]
i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e,i){n(this,t)
try{if(!e.id)throw"The PowerReserve class requires that an ID of the power reserve element be provided."}catch(t){return void console.error(t)}this.element=document.getElementById(e.id),this.interval=null,this.parent=i,this.minAngle=e.range[0],this.maxAngle=e.range[1],this.increment=.5,this.init()}return i(t,[{key:"decrementReserve",value:function(){var t=this.parent.getCurrentRotateValue(this.element)
if(t<=this.minAngle)this.parent.stopInterval()
else{var e=Number(t)-this.increment/2
this.element.style.transform="rotate("+e+"deg)"}}},{key:"incrementReserve",value:function(){var t=this.parent.getCurrentRotateValue(this.element)
if(t<=this.maxAngle-this.increment&&t>=this.minAngle){var e=Number(t)+this.increment
this.element.style.transform="rotate("+e+"deg)"}}},{key:"startInterval",value:function(){var t=this
this.interval=setInterval(function(){t.decrementReserve()},1e3)}},{key:"stopInterval",value:function(){clearInterval(this.interval),this.interval=null}},{key:"init",value:function(){this.element.style.transform="rotate("+this.maxAngle+"deg)"}}]),t}()
t.exports=s},function(t,e){"use strict"
function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n]
i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e,i){n(this,t)
try{if(!e.id)throw"The MoonPhase class requires that an ID of the moonphase element be provided."}catch(t){return void console.error(t)}this.parent=i,this.element=document.getElementById(e.id),this.invert=e.invert||!1,this.init()}return i(t,[{key:"rotateDisc",value:function(t){t=this.invert?-1*t:t,this.element.style.transform="rotate("+t+"deg)"}},{key:"getCurrentPhase",value:function(){var t=this.parent.rightNow,e=t.getFullYear(),n=t.getMonth(),i=t.getDate(),s=void 0,r=void 0,a=void 0,o=void 0,h=void 0
switch(n<3&&(e--,n+=12),n++,s=365.25*e,r=30.6*n,a=s+r+i-694039.09,a/=29.5305882,o=parseInt(a),a-=o,o=Math.round(8*a),h=10*a,h=+h.toFixed(2),o>=8&&(o=0),o){case 0:this.invert?this.rotateDisc(0):this.rotateDisc(180)
break
case 1:this.rotateDisc(83)
break
case 2:this.rotateDisc(60)
break
case 3:this.rotateDisc(37)
break
case 4:this.invert?this.rotateDisc(180):this.rotateDisc(0)
break
case 5:this.rotateDisc(-37)
break
case 6:this.rotateDisc(-60)
break
case 7:this.rotateDisc(-83)
break
default:console.log("Error")}}},{key:"init",value:function(){this.getCurrentPhase()}}]),t}()
t.exports=s},function(t,e){"use strict"
function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n]
i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e,i,s){n(this,t)
try{if(!i)throw"The MinuteRepeater class requires that an ID of the repeater element be provided."}catch(t){return void console.error(t)}this.hands=e.hands,this.hourAngle=0,this.hourChimes=0,this.hourElement=null,this.hourDivisor=12===e.format?30:15,this.allMinutes=0,this.minuteAngle=0,this.fifteenMinuteChimes=0,this.fifteenMinuteElement=null,this.minuteChimes=0,this.minuteElement=null,this.trigger=document.getElementById(i.id),this.chimes=i.chimes,this.counter=1,this.isPlaying=!1,this.parent=s,this.init()}return i(t,[{key:"convertAngleToIncrements",value:function(){this.hourAngle=this.parent.getCurrentRotateValue(this.hands.hour),this.hourAngle>360&&(this.hourAngle-=360),this.hourChimes=Math.floor(this.hourAngle/this.hourDivisor)||12
try{if(!this.hands.minute)throw"The minute repeater, like, by definition, requires a dial which supports a minute hand."}catch(t){return void console.error(t)}this.minuteAngle=this.parent.getCurrentRotateValue(this.hands.minute),this.minuteAngle>360&&(this.minuteAngle%=360),this.allMinutes=Math.floor(this.minuteAngle/6),this.fifteenMinuteChimes=Math.floor(this.allMinutes/15),this.minuteChimes=Math.floor(this.allMinutes-15*this.fifteenMinuteChimes)}},{key:"bindEvents",value:function(){var t=this
this.trigger.addEventListener("click",function(){t.togglePlaying()}),this.hourElement.addEventListener("ended",function(){t.playHours()}),this.fifteenMinuteElement.addEventListener("ended",function(){t.playFifteenMinutes()}),this.minuteElement.addEventListener("ended",function(){t.playMinutes()})}},{key:"stopAll",value:function(){this.hourElement.pause(),this.hourElement.currentTime=0,this.fifteenMinuteElement.pause(),this.fifteenMinuteElementcurrentTime=0,this.minuteElement.pause(),this.minuteElementcurrentTime=0,this.counter=1,this.isPlaying=!1}},{key:"togglePlaying",value:function(){this.parent.globalInterval&&(this.isPlaying=!this.isPlaying,this.isPlaying?(this.convertAngleToIncrements(),this.playHours()):this.stopAll())}},{key:"playHours",value:function(){this.counter<=this.hourChimes?(this.hourElement.play(),this.counter++):this.counter===this.hourChimes+1&&(this.counter=1,this.playFifteenMinutes())}},{key:"playFifteenMinutes",value:function(){this.counter<=this.fifteenMinuteChimes?(this.fifteenMinuteElement.play(),this.counter++):this.counter===this.fifteenMinuteChimes+1&&(this.counter=1,this.playMinutes())}},{key:"playMinutes",value:function(){this.counter<=this.minuteChimes?(this.minuteElement.play(),this.counter++):this.counter===this.minuteChimes+1&&(this.counter=1)}},{key:"buildAudioElements",value:function(){this.hourElement=document.createElement("audio"),this.hourElement.src=this.chimes.hour,document.body.appendChild(this.hourElement),this.fifteenMinuteElement=document.createElement("audio"),this.fifteenMinuteElement.src=this.chimes.quarter,document.body.appendChild(this.fifteenMinuteElement),this.minuteElement=document.createElement("audio"),this.minuteElement.src=this.chimes.minute,document.body.appendChild(this.minuteElement)}},{key:"updateCursorForTrigger",value:function(){this.trigger.style.cursor="pointer"}},{key:"init",value:function(){this.buildAudioElements(),this.bindEvents(),this.updateCursorForTrigger()}}]),t}()
t.exports=s},function(t,e){"use strict"
function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n]
i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e,i,s){n(this,t)
try{if(!i.id)throw"The DayNightIndicator class requires that an ID of the indiciator element be provided."}catch(t){return void console.error(t)}this.element=document.getElementById(i.id),this.dial=e,this.hands=e.hands,this.parent=s,this.invert=i.invert||!1,this.hours=this.parent.rightNow.getHours(),this.isAM=this.hours<12,this.hourAngle=0,this.hourDivisor=12===e.format?30:15,this.init()}return i(t,[{key:"toggleAMPM",value:function(){this.isAM=!this.isAM}},{key:"removeTransitionDuration",value:function(){this.element.style.transition="none"}},{key:"rotateIndicator",value:function(){var t=0
t=this.hours>=0&&this.hours<6?this.invert?180:0:this.hours>=6&&this.hours<12?90:this.hours>=12&&this.hours<18?this.invert?0:180:270,this.invert&&(t*=-1),this.element.style.transform="rotate("+t+"deg)"}},{key:"getHourHandAngle",value:function(){this.hourAngle=this.parent.getCurrentRotateValue(this.hands.hour)}},{key:"convertAngleToHours",value:function(t){t===this.dial.name&&(this.getHourHandAngle(),360===this.hourAngle&&this.toggleAMPM(),this.hours=Math.floor(this.hourAngle/this.hourDivisor),this.hours=this.isAM?this.hours:this.hours+12,this.hours=24===this.hours?0:this.hours,this.rotateIndicator())}},{key:"init",value:function(){this.removeTransitionDuration(),this.rotateIndicator()}}]),t}()
t.exports=s}])
